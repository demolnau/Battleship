(()=>{var e={741:(e,i,s)=>{const n=s(725),o=[["carrier",5],["battleship",4],["cruiser",3],["submarine",3],["destroyer",2]];e.exports=function(){var e=s(),i=t();function s(){var e=[];for(let i=0;i<10;i++){e[i]=[];for(let s=0;s<10;s++){let n={position:[i,s]};e[i][s]=n}}return e}function t(){var e=[];for(let i=0;i<o.length;i++){const s=n(o[i][0],o[i][1]);e.push(s)}return e}function r(e,i){return e<10&&e>-1&&i<10&&i>-1||(console.log("position "+e+","+i+" is not on the board"),!1)}function a(){try{var e=[];for(let i=0;i<o.length;i++){var s=this.ships[i].position;e.push(...s)}return e}catch(n){if(n instanceof TypeError){e=[];for(let n=0;n<o.length;n++)s=i[n].position,e.push(...s);return e}throw n}}function l(e,i,s){var n=a();if(e.ship_length!=i.length)return console.log("Array is not the same length as the ship length required for that type of ship"),!1;if(0==function(e,i,s){if(0==s&&i[0][1]+e.ship_length-1>9)return!1}(e,i,s))return console.log("wrapping is not allowed!"),!1;for(let e=0;e<i.length;e++){if(JSON.stringify(n).includes(JSON.stringify(i[e])))return console.log("WARNING: There is already a ship there"),!1;if(!r(i[e][0],i[e][1]))return console.log("That position is off the board"),!1}return!0}function u(e,i,s){return console.log("Called place ship on: "+e.name+"\n at position: "+JSON.stringify(i)),l(e,i,s)?(e.position=i,console.log(e.name+" placed successfully"),!0):(console.log("WARNING: You cannot place ship"),!1)}function h(e,i,s,n){var o,t=[e,i],r=[];if(r.push(t),1==n)for(let n=1;n<s;n++)o=[e+n,i],r.push(o);else for(let n=1;n<s;n++)o=[e,i+n],r.push(o);return r}function p(e){var i=Math.floor(10*Math.random()),s=Math.floor(10*Math.random()),n=Math.random()<.5,o=h(i,s,e.ship_length,n);return null==o?(console.log("This position array will not work. Generate a new positon array"),!1):!!u(e,o,n)}return{board:e,ships:i,missed_shots:[],number_of_ships_sunk:0,number_of_ships_played:0,position_of_hits:[],get_position_of_ships:a,placeShip:u,create_board:s,generate_ships:t,receiveAttack:function(e,i){if(!JSON.stringify(this.missed_shots).includes(JSON.stringify([e,i]))&&!JSON.stringify(this.position_of_hits).includes(JSON.stringify([e,i]))){for(let s=0;s<this.ships.length;s++)if(JSON.stringify(this.ships[s].position).includes(JSON.stringify([e,i])))return console.log("you hit a ship!"),this.ships[s].hits++,this.position_of_hits.push([e,i]),1==this.ships[s].isSunk()&&(this.number_of_ships_sunk++,console.log(`YOU SUNK A ${this.ships[s].name}!`)),1==this.sunk_all_ships()&&console.log("GAME OVER"),!0;return console.log("you missed!"),this.missed_shots.push([e,i]),!1}console.log("you already made that move!")},check_position_on_board:r,sunk_all_ships:function(){return!(o.length>this.number_of_ships_sunk)},create_board:s,isPlacementPossible:l,get_possible_position_array:h,randomly_place_single_ship:p,randomly_place_ships:function(){for(var e=0;e<5;)p(this.ships[e])&&e++;return JSON.stringify(a())},get_sunk_ship_positions:function(){var e=[];for(let i=0;i<5;i++)1==this.ships[i].isSunk()&&e.push(...this.ships[i].position);return e},get_number_of_ships_placed:function(){for(let e=0;e<this.ships.length;e++)0!=this.ships[e].position.length&&this.number_of_ships_played++;return this.number_of_ships_played}}}},44:(e,i,s)=>{const n=s(741);e.exports=function(){var e=n(),i=o(JSON.parse(JSON.stringify(e.board))),s=[];function o(e){var i=[];for(let s=0;s<10;s++)for(let n=0;n<10;n++)i.push(e[s][n].position);return i}function t(e,s){for(let n=0;n<i.length;n++)if(JSON.stringify(i[n])==JSON.stringify([e,s]))return n}function r(e,i){var s=[[0,-1],[-1,0],[0,1],[1,0]],n=[];for(let a=0;a<s.length;a++){var o=s[a][0]+e[0],t=s[a][1]+e[1],r=[o,t];i.gameboard.check_position_on_board(o,t)&&n.push(r)}return n}return{gameboard:e,name:null,available_moves:i,previous_moves:s,priority_moves:[],get_available_moves:o,get_index_from_available_moves:t,manual_attack:function(e,i){if(5==this.gameboard.number_of_ships_played&&5==e.gameboard.number_of_ships_played){var s=i[0],n=i[1],o=t(s,n);if(console.log(`Attack ${e.name} at position [${s},${n}] \n at index ${o}`),JSON.stringify(this.previous_moves).includes(JSON.stringify([s,n])))return void console.log("you already made that move!");var r=e.gameboard.receiveAttack(s,n);return this.previous_moves.push([s,n]),this.available_moves.splice(o,1),r}},random_attack:function(e){if(5==this.gameboard.number_of_ships_played&&5==e.gameboard.number_of_ships_played){if(!(this.available_moves.length>0))return void console.log("there are no more moves to make");var i=Math.floor(Math.random()*this.available_moves.length),s=this.available_moves[i][0],n=this.available_moves[i][1];if(this.available_moves.splice(i,1),!JSON.stringify(this.previous_moves).includes(JSON.stringify([s,n])))return this.previous_moves.push([s,n]),e.gameboard.receiveAttack(s,n)}},get_neighboring_positions:r,smart_attack:function(e){if(JSON.stringify(e.gameboard.position_of_hits).includes(JSON.stringify(this.previous_moves[this.previous_moves.length-1]))){var i=r([this.previous_moves[this.previous_moves.length-1][0],this.previous_moves[this.previous_moves.length-1][1]],e);for(let e=0;e<i.length;e++)JSON.stringify(s).includes(JSON.stringify(i[e]))||this.priority_moves.push(i[e]);this.manual_attack(e,this.priority_moves.pop())}else 0!=this.priority_moves.length?this.manual_attack(e,this.priority_moves.pop()):this.random_attack(e)}}}},725:e=>{e.exports=function(e,i){return this.name=e,this.ship_length=i,{name:e,ship_length:i,position:[],hits:0,sunk:!1,hit:function(){return this.hits=this.hits+1,this.hits},isSunk:function(){return this.ship_length==this.hits&&(this.sunk=!0),this.sunk}}}}},i={};function s(n){var o=i[n];if(void 0!==o)return o.exports;var t=i[n]={exports:{}};return e[n](t,t.exports,s),t.exports}(()=>{const e=s(44);var i=e(),n=e();i.name="Player1",n.name="Player2";var o=document.querySelector(".grid-container-mine"),t=document.querySelector(".grid-container-opponent"),r=i.gameboard.position_of_hits,a=i.gameboard.missed_shots,l=n.gameboard.position_of_hits,u=n.gameboard.missed_shots,h=document.querySelector(".choices > .content"),p=document.querySelector(".manual_placement"),c=document.querySelector(".random_placement"),_=document.createElement("button");_.classList.add("reset_button"),_.innerHTML="Reset";var f=document.querySelector(".console > .text");f.innerHTML="Would you like to place your own ships manually or at random?",function(){for(let i=1;i<11;i++)for(let s=1;s<11;s++){var e=document.createElement("div");e.className="grid-item",e.style.gridRow=i+"/span 1",e.style.gridColumn=s+"/span 1 ",e.innerHTML=`${i-1},${s-1}`,t.append(e)}}(),function(){for(let i=1;i<11;i++)for(let s=1;s<11;s++){var e=document.createElement("div");e.className="grid-item",e.style.gridRow=i+"/span 1",e.style.gridColumn=s+"/span 1 ",e.innerHTML=`${i-1},${s-1}`,o.append(e)}}();var m,d,g,v=o.querySelectorAll(":scope > .grid-item"),y=t.querySelectorAll(":scope > .grid-item"),b=[],N=!1,S=[];function L(e){var i=Number(e.innerHTML[0]),s=Number(e.innerHTML[2]);return S=[i,s]}function k(){return d=m.ship_length,0==g?(b=function(e,s,n,o){var t=Number(s[0]),r=Number(s[1]);possible_pos_array=[],possible_pos_array.push(s);for(let e=1;e<n;e++)if(1==o){var a=[t+=1,r];possible_pos_array.push(a)}else a=[t,r+=1],possible_pos_array.push(a);return 0==i.gameboard.isPlacementPossible(e,possible_pos_array,o)?void 0:possible_pos_array}(m,S,d,N),null==b?M():(e=b,v.forEach((function(i){S=L(i),JSON.stringify(e).includes(S)?i.classList.add("hover_over"):i.classList.remove("hover_over")}))),b):void 0;var e}function M(){v.forEach((function(e){e.classList.remove("hover_over")}))}function O(){n.gameboard.randomly_place_ships(),n.gameboard.get_number_of_ships_placed(),f.innerHTML="Now we are ready to play. Click on the opposing team's board to launch an attack.",h.appendChild(_),y.forEach((function(e){var s=[Number(e.innerHTML[0]),Number(e.innerHTML[2])];e.onclick=function(){if(f.innerHTML="",i.gameboard.number_of_ships_sunk<5&&n.gameboard.number_of_ships_sunk<5){f.innerHTML="Entered this loop on a click";var o=i.manual_attack(n,s);if(null!=o){if(function(e){var i,s=[Number(e.innerHTML[0]),Number(e.innerHTML[2])],o=n.gameboard.get_sunk_ship_positions();JSON.stringify(o).includes(JSON.stringify(s))&&(i=o,y.forEach((function(e){var s=[Number(e.innerHTML[0]),Number(e.innerHTML[2])];JSON.stringify(i).includes(JSON.stringify(s))&&(e.classList.remove("hit"),e.classList.add("sunk"))}))),JSON.stringify(l).includes(JSON.stringify(s))&&e.classList.add("hit"),JSON.stringify(u).includes(JSON.stringify(s))&&e.classList.add("miss")}(e),1==o){if(f.innerHTML=`Direct hit at [${e.innerHTML}] on opponent`,5==n.gameboard.number_of_ships_sunk)return void(f.innerHTML="You are a winner!")}else f.innerHTML=`Attack at [${e.innerHTML}] missed opponent`;if(n.smart_attack(i),J(),5==i.gameboard.number_of_ships_sunk)return void(f.innerHTML="You lost! Click reset to play again!")}else f.innerHTML=`Attack at [${e.innerHTML}] is not allowed \n Number of ships played: ${i.gameboard.number_of_ships_played} \n Number of my ships sunk: ${i.gameboard.number_of_ships_sunk} `}else f.innerHTML="No more moves are allowed. Please reset your game if you want to continue."}}))}function J(){v.forEach((function(e){var s,n=[Number(e.innerHTML[0]),Number(e.innerHTML[2])],o=i.gameboard.get_position_of_ships(),t=i.gameboard.get_sunk_ship_positions();JSON.stringify(o).includes(JSON.stringify(n))&&e.classList.add("ship_present"),JSON.stringify(r).includes(JSON.stringify(n))&&e.classList.add("hit"),JSON.stringify(a).includes(JSON.stringify(n))&&e.classList.add("miss"),JSON.stringify(t).includes(JSON.stringify(n))&&(s=t,v.forEach((function(e){var i=[Number(e.innerHTML[0]),Number(e.innerHTML[2])];JSON.stringify(s).includes(JSON.stringify(i))&&(e.classList.remove("hit"),e.classList.add("sunk"))})))}))}p.addEventListener("click",(function(){h.innerHTML="",f.innerHTML="",h.appendChild(_),m=i.gameboard.ships[0],g=!1,v.forEach((function(e){e.addEventListener("mouseover",(function(){L(e)}))})),v.forEach((function(e){e.addEventListener("mouseover",k)})),v.forEach((function(e){e.addEventListener("click",(function(){!function(e,s,n){if(0==g){M();var o=i.gameboard.placeShip(e,s,n);g=!0,J(),o&&(i.gameboard.number_of_ships_played++,i.gameboard.number_of_ships_played<5&&(m=i.gameboard.ships[i.gameboard.number_of_ships_played],f.innerHTML="",f.innerHTML=`Place your ${m.name} . Right-click to rotate.`,g=!1),5==i.gameboard.number_of_ships_played&&(console.log("You placed all your ships! Ready to play!"),f.innerHTML="",O()))}}(m,b,N)}))}))})),c.onclick=function(){h.innerHTML="",f.innerHTML="",i.gameboard.randomly_place_ships(),i.gameboard.get_number_of_ships_placed(),J(),O()},window.addEventListener("contextmenu",(function(e){e.preventDefault(),N=0==N})),_.onclick=function(){location.reload()}})()})();